Implement the requested change and you must add comprehensive test cases for the coverage. Ensure all tests pass on Linux, macOS, and Windows. 
If a plan markdown file is provided with checkboxes for individual tasks, mark each task as complete after committing the corresponding changes.
Commit after the change when no test failure.