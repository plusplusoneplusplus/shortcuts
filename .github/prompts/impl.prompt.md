Implement the requested change with comprehensive test cases. Ensure all tests pass on Linux, macOS, and Windows. Commit when confident.
If a plan markdown file is provided with checkboxes for individual tasks, mark each task as complete after committing the corresponding changes.